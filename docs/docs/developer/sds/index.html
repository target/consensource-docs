<!doctype html>
<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="generator" content="Hugo 0.59.1" />

<META NAME="ROBOTS" CONTENT="INDEX, FOLLOW">

<link rel="alternate" type="application/rss&#43;xml" href="https://target.github.io/consensource-docs/docs/developer/sds/index.xml">


<link rel="shortcut icon" href="/favicons/favicon.ico" >
<link rel="apple-touch-icon" href="/consensource-docs/favicons/apple-touch-icon-180x180.png" sizes="180x180">
<link rel="icon" type="image/png" href="/consensource-docs/favicons/favicon-16x16.png" sizes="16x16">
<link rel="icon" type="image/png" href="/consensource-docs/favicons/favicon-32x32.png" sizes="32x32">
<link rel="icon" type="image/png" href="/consensource-docs/favicons/android-36x36.png" sizes="36x36">
<link rel="icon" type="image/png" href="/consensource-docs/favicons/android-48x48.png" sizes="48x48">
<link rel="icon" type="image/png" href="/consensource-docs/favicons/android-72x72.png" sizes="72x72">
<link rel="icon" type="image/png" href="/consensource-docs/favicons/android-96x96.png" sizes="96x96">
<link rel="icon" type="image/png" href="/consensource-docs/favicons/android-144x144.png" sizes="144x144">
<link rel="icon" type="image/png" href="/consensource-docs/favicons/android-192x192.png" sizes="192x192">

<title>State Delta Subscriber | ConsenSource Docs</title><meta property="og:title" content="State Delta Subscriber" />
<meta property="og:description" content="" />
<meta property="og:type" content="website" />
<meta property="og:url" content="https://target.github.io/consensource-docs/docs/developer/sds/" />

<meta itemprop="name" content="State Delta Subscriber">
<meta itemprop="description" content="">

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="State Delta Subscriber"/>
<meta name="twitter:description" content=""/>


<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-158864115-2', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>






<link rel="preload" href="/consensource-docs/scss/main.min.06d2f3f565aada874a283fd9aa7ee7306ffe47c9d46ea0c56e7c9b43bbf020cf.css" as="style">
<link href="/consensource-docs/scss/main.min.06d2f3f565aada874a283fd9aa7ee7306ffe47c9d46ea0c56e7c9b43bbf020cf.css" rel="stylesheet" integrity="">


<script
  src="https://code.jquery.com/jquery-3.3.1.min.js"
  integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
  crossorigin="anonymous"></script>




    <title>State Delta Subscriber | ConsenSource Docs</title>
  </head>
  <body class="td-section">
    <header>
      
<nav class="js-navbar-scroll navbar navbar-expand navbar-dark flex-column flex-md-row td-navbar">
        <a class="navbar-brand" href="/consensource-docs/">
		<span class="navbar-logo"></span><span class="text-uppercase font-weight-bold">ConsenSource Docs</span>
	</a>
	<div class="td-navbar-nav-scroll ml-md-auto" id="main_navbar">
		<ul class="navbar-nav mt-2 mt-lg-0">
			
			
			<li class="nav-item mr-4 mb-2 mb-lg-0">
				
				
				
				
				
				
				<a class="nav-link" href="/consensource-docs/about/" ><span>About</span></a>
			</li>
            
            <li class="nav-item dropdown d-none d-lg-block">
                <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
        Documentation (WIP)
    </a>
    <div class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
        <a class="dropdown-item" href="/consensource-docs/docs/business">Business</a>
        <a class="dropdown-item" href="/consensource-docs/docs/developer">Developer</a>
    </div>
    
			</li>
			<li class="nav-item mr-4 mb-2 mb-lg-0">
				<a class="nav-link" href="http://consensource.org" target=_blank>View the app</a>
			</li>
			
			
		</ul>
	</div>
	<div class="navbar-nav d-none d-lg-block">
<input type="search" class="form-control td-search-input" placeholder="&#xf002 Search this site…" aria-label="Search this site…" autocomplete="off">
</div>
</nav>

    </header>
    <div class="container-fluid td-outer">
      <div class="td-main">
        <div class="row flex-xl-nowrap">
          <div class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none">
            




<div id="td-sidebar-menu" class="td-sidebar__inner">
  
  <nav class="collapse td-sidebar-nav pt-2 pl-4" id="td-section-nav">
    
    






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/consensource-docs/docs/" class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__section">Documentation</a>
  </li>
  <ul>
    <li class="collapse show" id="consensource-docs-docs">
      
      
      
      
      






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/consensource-docs/docs/business/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Business</a>
  </li>
  <ul>
    <li class="collapse " id="consensource-docs-docs-business">
      
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-consensource-docs-docs-business-context-problem-statement" href="/consensource-docs/docs/business/context-problem-statement/">Context and Problem Statement</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-consensource-docs-docs-business-value-proposition" href="/consensource-docs/docs/business/value-proposition/">Value Proposition</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-consensource-docs-docs-business-dlt-overview" href="/consensource-docs/docs/business/dlt-overview/">Distributed Ledger Technology (DLT) Overview</a>
      
      
    </li>
  </ul>
</ul>

      
      
      
      






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/consensource-docs/docs/developer/" class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__section">Developer</a>
  </li>
  <ul>
    <li class="collapse show" id="consensource-docs-docs-developer">
      
      
      
      
      






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/consensource-docs/docs/developer/getting-started/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Getting Started</a>
  </li>
  <ul>
    <li class="collapse " id="consensource-docs-docs-developer-getting-started">
      
      
      
      
      






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/consensource-docs/docs/developer/getting-started/local/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Running ConsenSource Locally</a>
  </li>
  <ul>
    <li class="collapse " id="consensource-docs-docs-developer-getting-started-local">
      
      
      
      
      






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/consensource-docs/docs/developer/getting-started/local/mac/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">macOS</a>
  </li>
  <ul>
    <li class="collapse " id="consensource-docs-docs-developer-getting-started-local-mac">
      
      
      
    </li>
  </ul>
</ul>

      
      
      
      






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/consensource-docs/docs/developer/getting-started/local/windows/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Windows</a>
  </li>
  <ul>
    <li class="collapse " id="consensource-docs-docs-developer-getting-started-local-windows">
      
      
      
    </li>
  </ul>
</ul>

      
      
      
      






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/consensource-docs/docs/developer/getting-started/local/linux/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Linux</a>
  </li>
  <ul>
    <li class="collapse " id="consensource-docs-docs-developer-getting-started-local-linux">
      
      
      
    </li>
  </ul>
</ul>

      
      
    </li>
  </ul>
</ul>

      
      
      
      






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/consensource-docs/docs/developer/getting-started/gcp/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Running ConsenSource In GCP</a>
  </li>
  <ul>
    <li class="collapse " id="consensource-docs-docs-developer-getting-started-gcp">
      
      
      
    </li>
  </ul>
</ul>

      
      
    </li>
  </ul>
</ul>

      
      
      
      






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/consensource-docs/docs/developer/architecture-overview/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Architecture Overview</a>
  </li>
  <ul>
    <li class="collapse " id="consensource-docs-docs-developer-architecture-overview">
      
      
      
    </li>
  </ul>
</ul>

      
      
      
      






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/consensource-docs/docs/developer/terminology/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Terminology</a>
  </li>
  <ul>
    <li class="collapse " id="consensource-docs-docs-developer-terminology">
      
      
      
    </li>
  </ul>
</ul>

      
      
      
      






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/consensource-docs/docs/developer/api/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">API</a>
  </li>
  <ul>
    <li class="collapse " id="consensource-docs-docs-developer-api">
      
      
      
    </li>
  </ul>
</ul>

      
      
      
      






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/consensource-docs/docs/developer/cli/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">CLI</a>
  </li>
  <ul>
    <li class="collapse " id="consensource-docs-docs-developer-cli">
      
      
      
    </li>
  </ul>
</ul>

      
      
      
      






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/consensource-docs/docs/developer/sds/" class="align-left pl-0 pr-2 active td-sidebar-link td-sidebar-link__section">State Delta Subscriber</a>
  </li>
  <ul>
    <li class="collapse show" id="consensource-docs-docs-developer-sds">
      
      
      
    </li>
  </ul>
</ul>

      
      
      
      






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/consensource-docs/docs/developer/txn-processor/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Transaction Processor &amp; Family</a>
  </li>
  <ul>
    <li class="collapse " id="consensource-docs-docs-developer-txn-processor">
      
      
      
    </li>
  </ul>
</ul>

      
      
      
      






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/consensource-docs/docs/developer/ui/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">User Interface</a>
  </li>
  <ul>
    <li class="collapse " id="consensource-docs-docs-developer-ui">
      
      
      
      
      






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/consensource-docs/docs/developer/ui/user-personas/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">User Personas</a>
  </li>
  <ul>
    <li class="collapse " id="consensource-docs-docs-developer-ui-user-personas">
      
      
      
      
      






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/consensource-docs/docs/developer/ui/user-personas/retailer/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Retailer</a>
  </li>
  <ul>
    <li class="collapse " id="consensource-docs-docs-developer-ui-user-personas-retailer">
      
      
      
    </li>
  </ul>
</ul>

      
      
      
      






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/consensource-docs/docs/developer/ui/user-personas/factory/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Factory</a>
  </li>
  <ul>
    <li class="collapse " id="consensource-docs-docs-developer-ui-user-personas-factory">
      
      
      
    </li>
  </ul>
</ul>

      
      
      
      






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/consensource-docs/docs/developer/ui/user-personas/cert-body/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Certifying Body</a>
  </li>
  <ul>
    <li class="collapse " id="consensource-docs-docs-developer-ui-user-personas-cert-body">
      
      
      
    </li>
  </ul>
</ul>

      
      
      
      






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/consensource-docs/docs/developer/ui/user-personas/standards-body/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Standards Body</a>
  </li>
  <ul>
    <li class="collapse " id="consensource-docs-docs-developer-ui-user-personas-standards-body">
      
      
      
    </li>
  </ul>
</ul>

      
      
    </li>
  </ul>
</ul>

      
      
      
      






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/consensource-docs/docs/developer/ui/key-mgmt/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Key Management</a>
  </li>
  <ul>
    <li class="collapse " id="consensource-docs-docs-developer-ui-key-mgmt">
      
      
      
    </li>
  </ul>
</ul>

      
      
      
      






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/consensource-docs/docs/developer/ui/txns-batches/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Transaction &amp; Batch Building</a>
  </li>
  <ul>
    <li class="collapse " id="consensource-docs-docs-developer-ui-txns-batches">
      
      
      
    </li>
  </ul>
</ul>

      
      
    </li>
  </ul>
</ul>

      
      
      
      






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/consensource-docs/docs/developer/troubleshooting/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Troubleshooting</a>
  </li>
  <ul>
    <li class="collapse " id="consensource-docs-docs-developer-troubleshooting">
      
      
      
    </li>
  </ul>
</ul>

      
      
    </li>
  </ul>
</ul>

      
      
    </li>
  </ul>
</ul>

  </nav>
</div>




          </div>
          <div class="d-none d-xl-block col-xl-2 td-toc d-print-none">
            




<div class="td-page-meta ml-2 pb-1 pt-2 mb-0">





<a href="https://github.com/target/consensource-docs/edit/master/content/en/docs/developer/SDS/_index.md" target="_blank"><i class="fa fa-edit fa-fw"></i> Edit this page</a>
<a href="https://github.com/target/consensource-docs/issues/new?title=State%20Delta%20Subscriber" target="_blank"><i class="fab fa-github fa-fw"></i> Create documentation issue</a>

</div>






<nav id="TableOfContents">
<ul>
<li>
<ul>
<li>
<ul>
<li><a href="#sawtooth-overview">Sawtooth Overview</a></li>
<li><a href="#sds-implementation">SDS Implementation</a></li>
<li><a href="#tradeoffs">Tradeoffs</a></li>
<li><a href="#reporting-database-structure">Reporting Database Structure</a></li>
<li><a href="#start-end-block-nums">Start &amp; End Block Nums</a></li>
<li><a href="#primary-keys">Primary Keys</a></li>
<li><a href="#fork-resolution">Fork resolution</a></li>
</ul></li>
</ul></li>
</ul>
</nav>



          </div>
          <main class="col-12 col-md-9 col-xl-8 pl-md-5" role="main">
            <nav aria-label="breadcrumb" class="d-none d-md-block d-print-none">
	<ol class="breadcrumb spb-1">
		










<li class="breadcrumb-item" >
	<a href="https://target.github.io/consensource-docs/docs/">Documentation</a>
</li>




<li class="breadcrumb-item" >
	<a href="https://target.github.io/consensource-docs/docs/developer/">Developer</a>
</li>




<li class="breadcrumb-item active" aria-current="page">
	<a href="https://target.github.io/consensource-docs/docs/developer/sds/">State Delta Subscriber</a>
</li>

	</ol>
</nav	>

            
<div class="td-content">
	<h1>State Delta Subscriber</h1>
	
	



<div class="alert alert-primary" role="alert">

<a href="https://github.com/target/consensource-sds/tree/master" target="_blank">View the ConsenSource SDS on Github</a>
</div>


<p>The goal of the State Delta Export (SDS) service is to provide a mechanism for exporting on-chain state values from a validator to an external data store. This allows applications to efficiently query their state values.</p>

<h3 id="sawtooth-overview">Sawtooth Overview</h3>

<p>Sawooth provides an <a href="https://sawtooth.hyperledger.org/docs/core/nightly/1-1/app_developers_guide/about_event_subscriptions.html" target="_blank">event subscription</a> service that allows clients to subscribe to two types of events:</p>

<ol>
<li>Block commits</li>
<li>State Delta events (at a particular address range)</li>
</ol>

<p>Sawtooth sends these events whenever the validator’s state is updated. State Delta events contain the raw state data at the updated addresses.</p>

<h3 id="sds-implementation">SDS Implementation</h3>

<p>In ConsenSource, the SDS subscribes to all block commits and all state delta events in the ConsenSource namespace (<code>3d0111</code>).</p>

<p>When a <em>block commit event</em> is emitted from a validator, the block ID and the block num are parsed and stored in the reporting DB.</p>

<p>When a <em>state delta event</em> is emitted from a validator, the data is parsed into the respective protobuf message, the message is converted into a valid object, and the object is stored in the reporting DB.</p>

<p>By subscribing to these two events, the SDS provides a mechanism for other services, such as the REST API, to query an up-to-date database without needing to make more expensive queries to a validator node.</p>

<h3 id="tradeoffs">Tradeoffs</h3>

<p>This off-chain state access comes at the expense of relying on a single validator for state updates.</p>

<p>By relying on a secondary data source instead of a validator node, this puts the application at risk of having stale data, or a forked state if the validator that is supplying the state updates comes out of consensus or is disconnected from the network.</p>

<h3 id="reporting-database-structure">Reporting Database Structure</h3>

<!-- TODO: Update the DB Schema diagram with latest schema -->

<!-- ![DB Schema](https://github.com/target/consensource-docs/blob/master/content/docs/developer/Application%20Developer's%20Guide/SDS/ConsenSource_DBSchema.png?raw=true) -->

<p>The reporting database has three types of tables:</p>

<ul>
<li>sawtooth-core tables

<ul>
<li>Blocks</li>
</ul></li>
<li>Domain-specific state tables

<ul>
<li>Agents, Assertions, Organizations, Authorizations, Certificates, CertificateData</li>
</ul></li>
<li>Application tables

<ul>
<li>Tables supporting off-chain application components, such as User info and Auth</li>
</ul></li>
</ul>

<p>The reporting database should follow the <a href="https://en.wikipedia.org/wiki/Slowly_changing_dimension#Type_2:_add_new_row" target="_blank">Type 2 of Slowly Changing Dimensions</a> data management pattern, so that fork resolution is easy.</p>

<h3 id="start-end-block-nums">Start &amp; End Block Nums</h3>

<p>In a blockchain there is no way to &ldquo;delete&rdquo; information. To indicate that a value is state is still valid, the concept of starting and ending block numbers is used.</p>

<p>Tables that include state data have additional columns of <em>start_block_num</em> and <em>end_block_num</em>. The ​start_block_num​ and ​end_block_num​ columns specify the block range in which that state value is set or exists. Values that are valid as of the current block have ​end_block_num​ set to <code>MAX_UINT_64</code>.</p>



<div class="alert alert-primary" role="alert">
<h4 class="alert-heading">Takeaway</h4>
A state value is considered valid if the <code>end_block_num</code> is greater than or equal to the current block.
</div>


<h3 id="primary-keys">Primary Keys</h3>

<p>Because there may be state objects in the database that refer to the same object in state at different block heights (with different block numbers), the primary key for each object cannot be the same as the object’s natural key in blockchain state. Instead, use a sequence ID column or another unique ID scheme as the primary key. For better query performance, it is recommended to create indexes on the natural key of the entry and the end_block_num.</p>

<h3 id="fork-resolution">Fork resolution</h3>

<p>The following pseudocode demonstrates the fork resolution process:</p>

<pre><code>resolve_fork(existing_block):
  for table in domain_tables:
    delete from table where start_block_num &gt;= existing_block.block_num
    update table set end_block_num = MAX_UINT_64 \
      where end_block_num &gt;= existing_block.block_num
  delete from block where block_num &gt;= existing_block.block_num
</code></pre>

        <div class="section-index">
    
    
    
    
    <hr class="panel-line">
        
            
        
            
        
            
        
            
        
            
        
            
        
            
        
            
        
            
        
            
        
            
        
            
        
            
        
            
        
            
        
            
        
            
        
            
        
            
        
            
        
            
        
            
        
            
        
            
        
            
        
            
        
            
        
    
</div>

	
		<style>
  .feedback--answer {
    display: inline-block;
  }
  .feedback--answer-no {
    margin-left: 1em;
  }
  .feedback--response {
    display: none;
    margin-top: 1em;
  }
  .feedback--response__visible {
    display: block;
  }
</style>
<h2 class="feedback--title">Feedback</h2>
<p class="feedback--question">Was this page helpful?</p>
<button class="feedback--answer feedback--answer-yes">Yes</button>
<button class="feedback--answer feedback--answer-no">No</button>
<p class="feedback--response feedback--response-yes">
  Glad to hear it! Please <a href="https://github.com/target/consensource/issues/new/choose">tell us how we can improve</a>.
</p>
<p class="feedback--response feedback--response-no">
  Sorry to hear that. Please <a href="https://github.com/target/consensource/issues/new/choose">tell us how we can improve</a>.
</p>
<script>
  const yesButton = document.querySelector('.feedback--answer-yes');
  const noButton = document.querySelector('.feedback--answer-no');
  const yesResponse = document.querySelector('.feedback--response-yes');
  const noResponse = document.querySelector('.feedback--response-no');
  const disableButtons = () => {
    yesButton.disabled = true;
    noButton.disabled = true;
  };
  const sendFeedback = (value) => {
    if (typeof ga !== 'function') return;
    const args = {
      command: 'send',
      hitType: 'event',
      category: 'Helpful',
      action: 'click',
      label: window.location.pathname,
      value: value
    };
    ga(args.command, args.hitType, args.category, args.action, args.label, args.value);
  };
  yesButton.addEventListener('click', () => {
    yesResponse.classList.add('feedback--response__visible');
    disableButtons();
    sendFeedback(1);
  });
  noButton.addEventListener('click', () => {
    noResponse.classList.add('feedback--response__visible');
    disableButtons();
    sendFeedback(0);
  });
</script>

		<br />
	
	
	<div class="text-muted mt-5 pt-3 border-top">Last modified May 19, 2020: <a  href="https://github.com/target/consensource-docs/commit/ec25874c1fbe1a3f82632fa47b75ddf037ee7be9">Add takeaway alert (ec25874)</a>
</div>
</div>

          </main>
        </div>
      </div>
      
<footer class="bg-dark py-5 row d-print-none">
  <div class="container-fluid mx-sm-5">
    <div class="row">
      <div class="col-6 col-sm-4 text-xs-center order-sm-2">
        
      </div>
      <div class="col-6 col-sm-4 text-right text-xs-center order-sm-3">
        
      </div>
      <div class="col-12 col-sm-4 text-center py-2 order-sm-2">
        <small class="text-white">&copy; 2021 Target Brands All Rights Reserved</small>
        <small class="ml-1"><a href="https://github.com/target/consensource/blob/master/LICENSE" target="_blank">Privacy Policy</a></small>
	
		<p class="mt-2"><a href="/consensource-docs/about/">About ConsenSource</a></p>
	
      </div>
    </div>
  </div>
</footer>


    </div>
    
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>






<script src="/consensource-docs/js/main.min.cdd91a44697531d15efad5e3d5ac75f32e229c1434b8ed88a2fefbc45c5fd440.js" integrity="sha256-zdkaRGl1MdFe&#43;tXj1ax18y4inBQ0uO2Iov77xFxf1EA=" crossorigin="anonymous"></script>





  </body>
</html>